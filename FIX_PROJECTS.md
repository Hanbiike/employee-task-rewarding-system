# Исправление отображения проектов для менеджеров

## Проблема
Проекты не отображались на дэшборде менеджеров и на странице списка проектов из-за отсутствия связей в таблице `manager_projects`.

## Решение

Было исправлено две проблемы:

1. **В файле `install.php`** - добавлен код для создания связей в таблице `manager_projects` при создании новых проектов и обновлении существующих.

2. **Создан скрипт `fix_manager_projects.php`** - для исправления существующих данных без полного пересоздания базы.

## Как исправить

### Вариант 1: Полное пересоздание базы данных (рекомендуется для тестовых данных)

Просто откройте в браузере:
```
http://localhost:8888/employee-rewarding-system/install.php
```

Это пересоздаст всю базу данных с правильными связями.

### Вариант 2: Исправление существующих данных (если нужно сохранить данные)

Откройте в браузере:
```
http://localhost:8888/employee-rewarding-system/fix_manager_projects.php
```

Этот скрипт добавит недостающие связи между менеджерами и проектами, не удаляя существующие данные.

## Что было изменено

### 1. install.php
- Добавлено создание записей в `manager_projects` при создании новых проектов
- Добавлена проверка и создание связей для существующих проектов

### 2. fix_manager_projects.php (новый файл)
- Скрипт для одноразового исправления существующих данных
- Проходит по всем проектам и добавляет связи с создателями проектов

## Техническая информация

Метод `getByManager()` в классе `Project` использует таблицу `manager_projects` для получения проектов, назначенных менеджеру:

```php
public function getByManager($managerId) {
    $projects = $this->db->fetchAll(
        "SELECT p.*, 
                CONCAT(m.first_name, ' ', m.last_name) as created_by
         FROM projects p
         JOIN managers m ON p.created_by_manager_id = m.id
         JOIN manager_projects mp ON p.id = mp.project_id
         WHERE mp.manager_id = ?
         ORDER BY p.created_at DESC",
        [$managerId]
    );
    ...
}
```

Эта таблица должна содержать записи о том, какие менеджеры работают над какими проектами.
